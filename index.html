<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
		Some tweets: 
    <script>

      $(document).ready(function(){
        var $body = $('body');
        $body.html('');
		var i = 0;
		var getTweetDate = function(tweet){
			var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
			var hours = tweet.created_at.getHours();
			var ampm = hours >= 12 ? 'pm' : 'am';
			var hours = hours % 12;
			hours = hours ? hours : 12;
			
			return month[tweet.created_at.getMonth()] + " " + tweet.created_at.getDate() + " " + hours + ":" + tweet.created_at.getMinutes() + " " + ampm; 
		}
		var displayTweets = function(){
			while (streams.home.length > 0){
			  var tweet = streams.home.shift();
			  i++;
			  
			  var $tweet = $('<div></div>');
			  $tweet.html(i + '@' + tweet.user + ': ' + tweet.message + ' \&#183\; ' + getTweetDate(tweet));
			  $tweet.prependTo($body);
			  
			  if(i > 20){
				$body.children().last().remove();
			  }
			}
		}
		
		displayTweets();
		
		setInterval(displayTweets,1500);
		
		


      });

    </script>
  </body>
</html>
